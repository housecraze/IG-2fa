<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Luneza 2FA</title>
  <style>
  html, body {
    height: 100%;
    margin: 0;
    overflow: hidden;
    overscroll-behavior: none;
  }
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #a8edea, #fed6e3);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    margin: 0;
    padding-top: 20px;
  }
  .container {
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    padding: 20px;
    width: 100%;
    max-width: 450px;
  }
  h2, h3 { text-align: center; margin-bottom: 20px; }

  .field { margin: 8px 0; display: flex; align-items: center; }
  .field label { font-weight: bold; margin-right: 6px; white-space: nowrap; }
  .field span, .field input { flex: 1; font-size: 15px; }
  .field input {
    padding: 4px; border-radius: 6px; border: 1px solid #ccc; display: none;
  }
  .edit-btn { background: #ffc107; color: #000; font-size: 12px; padding: 4px 6px; margin-left: 5px; border-radius: 6px; cursor: pointer; }
  .copy-btn { background: #28a745; color: #fff; font-size: 12px; padding: 4px 6px; margin-left: 5px; border-radius: 6px; cursor: pointer; }

  .actions { margin-top: 15px; text-align: center; }
  button {
    margin: 5px; padding: 10px 14px; border: none; border-radius: 10px;
    cursor: pointer; font-size: 14px; transition: 0.3s;
  }
  .nav-btn { background: #007bff; color: #fff; }
  .save-btn { background: #17a2b8; color: #fff; }
  .ig-btn { background: #e1306c; color: #fff; }

  .floating-btn {
    position: fixed; display: flex; justify-content: center; align-items: center;
    border-radius: 50%; font-size: 22px; cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3); color: white;
  }

  /* Floating positions */
  .floating-refresh { bottom: 20px; right: 20px; background: #ff4081; }
  .floating-random { bottom: 20px; right: 80px; background: #3f51b5; }
  .floating-bio { bottom: 20px; right: 140px; background: #9c27b0; }
  .floating-caption { bottom: 20px; right: 200px; background: #009688; }
  .floating-first {  bottom: 20px; right: 260px;  background: #ff9800; }
  .floating-list { bottom: 20px; right: 320px; background: #4caf50; }

  .floating-copyUN { bottom: 80px; right: 20px; background: #4caf50; }
  .floating-CopyunT { bottom: 80px; right: 80px; background: #ff9800; }
  .floating-Pw { bottom: 80px; right: 140px; background: #009688; }

  .floating-CrC { bottom: 140px; right: 260px; background: #4caf50; }
  .floating-TGN { bottom: 140px; right: 200px; background: #4caf50; }
  .floating-TGUN { bottom: 140px; right: 140px; background: #4caf50; }
  .floating-TGAU { bottom: 140px; right: 80px; background: #4caf50; }
  .floating-TGP { bottom: 140px; right: 20px; background: #4caf50; }

  .floating-NxOnly { bottom: 200px; right: 80px; background: #3f51b5; }
  .floating-Next { bottom: 200px; right: 140px; background: #3f51b5; }
  .floating-Prev { bottom: 200px; right: 200px; background: #3f51b5; }
  .floating-Kill { bottom: 200px; right: 260px; background: #3f51b5; }

  /* Toast */
  .toast {
    position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%);
    background: rgba(0,0,0,0.8); color: white; padding: 10px 16px;
    border-radius: 8px; font-size: 14px; opacity: 0; transition: opacity 0.3s ease;
  }
  .toast.show { opacity: 1; }

  /* Modal styling */
  .modal {
    display: none; 
    position: fixed; 
    z-index: 999; 
    left: 0; top: 0;
    width: 100%; height: 100%; 
    background-color: rgba(0,0,0,0.6);
  }
  .modal-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    border-radius: 12px;
    width: 80%;
    max-width: 400px;
    max-height: 70%;
    overflow-y: auto;
  }
  .modal-content h3 { margin-top: 0; }
  .modal-content ul { list-style: none; padding: 0; }
  .modal-content li {
    padding: 8px; margin: 5px 0;
    background: #f5f5f5; border-radius: 6px;
    cursor: pointer; transition: 0.2s;
  }
  .modal-content li:hover { background: #e0e0e0; }
  .close { float: right; font-size: 22px; cursor: pointer; font-weight: bold; }

  /* Two-factor */
  .row { margin: 12px 0; }
  .code-box { display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; }
  .code { font-size: 36px; font-weight: bold; letter-spacing: 4px; }
  .small { font-size: 12px; color: #666; margin-top: 5px; }
</style>

</head>
<body>

  <h1>Luneza Profiles</h1>
<div class="container">
  <h3>Profile</h3>

  <div class="field"><label>Name:</label><span id="name"></span></div>
  <div class="field">
    <label>Username:</label>
    <span id="oldusername"></span>
    <input id="oldusernameInput">
  </div>
  <div class="field">
    <label>Authenticator:</label>
    <button id="copy2fa">Copy</button>
    <span id="newusername"></span>
    <input id="newusernameInput">
  </div>
  <div class="field"><label>Password:</label><span id="password"></span></div>

  <!-- Two-factor -->
  <div class="row">
    <input id="secret" placeholder="Enter Base32 Secret (e.g. JBSW...)" style="width:100%" />
  </div>

  <div class="code-box">
    <button id="pasteBtn">Paste</button>
    <div id="totp" class="code">------</div>
    <button id="copyBtn">Copy</button>
  </div>

  <div class="small">Next update in <span id="countdown">‚Äî</span>s</div>
</div>

<!-- Floating buttons -->
<div class="floating-btn floating-NxOnly" onclick="nextProfile()">=></div>
<div class="floating-btn floating-Next" onclick="runCont(); nextProfile()">Nx</div>
<div class="floating-btn floating-Prev" onclick="prevProfile()">Pv</div>
<div class="floating-btn floating-Kill" onclick="window.location='catscript://run?file=/path/to/trial.py'">KA</div>

<div class="floating-btn floating-TGP" onclick="copyText('password'); openCurrentIG()">IGP</div>
<div class="floating-btn floating-TGAU" onclick="copyText('newusername')">AU</div>
<div class="floating-btn floating-TGUN" onclick="copyText('oldusername'); openCurrentIG()">UN</div>
<div class="floating-btn floating-TGN" onclick="copyText('name'); openCurrentIG()">Na</div>
<div class="floating-btn floating-CrC" onclick="copyText('oldusername'); Createcon()">Cn</div>

<div class="floating-btn floating-copyUN" onclick="copyText('oldusername'); runCreateTH()">CU</div>
<div class="floating-btn floating-CopyunT" onclick="copyText('oldusername'); openCurrentTG()">ThU</div>
<div class="floating-btn floating-Pw" onclick="copyText('password'); openCurrentTG()">Pw</div>

<div class="floating-btn floating-refresh" onclick="loadProfiles()">‚ü≥</div>
<div class="floating-btn floating-random" onclick="randomCelebrity()">üé≤</div>
<div class="floating-btn floating-bio" onclick="randomBio(); openCurrentIG()">üå∏</div>
<div class="floating-btn floating-caption" onclick="randomCaption(); openCurrentIG()">üìù</div>
<div class="floating-btn floating-first" onclick="firstProfile()">‚èÆ</div>
<div class="floating-btn floating-list" onclick="showProfileList()">üìÇ</div>
<div class="floating-btn floating-list" onclick="lunezaIg2fa()">üôâ</div>

<!-- Modal for profile list -->
<div id="profileModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h3>Select a Profile</h3>
    <ul id="profileList"></ul>
  </div>
</div>

<div id="toast" class="toast"></div>

  <!-- Set API for Luneza page -->
  <script>
    window.overrideApiUrl = "https://script.google.com/macros/s/lunezaapi/exec";
  </script>

  <script src="shared.js"></script>
</body>
</html>
